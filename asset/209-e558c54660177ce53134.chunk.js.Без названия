(window.webpackJsonp=window.webpackJsonp||[]).push([[209],{1168:function(t,e,n){"use strict";n.d(e,"m",(function(){return b})),n.d(e,"b",(function(){return O})),n.d(e,"l",(function(){return E})),n.d(e,"d",(function(){return g})),n.d(e,"g",(function(){return w})),n.d(e,"e",(function(){return S})),n.d(e,"f",(function(){return T})),n.d(e,"k",(function(){return j})),n.d(e,"c",(function(){return k})),n.d(e,"j",(function(){return A})),n.d(e,"h",(function(){return P})),n.d(e,"i",(function(){return I})),n.d(e,"a",(function(){return R}));n(40),n(76),n(83),n(257),n(41),n(228),n(149),n(348),n(206),n(8),n(74),n(207),n(10),n(45),n(180),n(208),n(7),n(9),n(49),n(57),n(58);var r=n(400),o=n.n(r),a=n(1291),i=n.n(a),u=n(1536),c=n.n(u),s=n(1177),l=n(1186),f=n(1187),d=n(1294);function p(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function m(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?p(Object(n),!0).forEach((function(e){v(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):p(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function v(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function y(t,e){var n;if("undefined"===typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"===typeof t)return h(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return h(t,e)}(t))||e&&t&&"number"===typeof t.length){n&&(t=n);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,u=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return i=t.done,t},e:function(t){u=!0,a=t},f:function(){try{i||null==n.return||n.return()}finally{if(u)throw a}}}}function h(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var b=function(t,e){for(var n="".concat(t);n.length<e;)n="0".concat(n);return n},O=function(t){return s.a(t)},E=function(t){return+t?+t:0},g=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!t)return!1;for(var r=Object.keys(t),o=0;o<r.length;o++)for(var a=0;a<e.length;a++)if(0===r[o].toLowerCase().indexOf(e[a])&&r[o].length===e[a].length){if(!n||!n.type)return t[r[o]];var i=n.type;switch(i){case"date":if(n.format&&Object(f.k)(t[r[o]],n.format))return t[r[o]];if(Object(f.l)(t[r[o]]))return t[r[o]];break;case"time":if(Object(f.m)(t[r[o]]).isValid())return t[r[o]]}}return!1},_=function(t,e){var n;i.a.interpolate=/{{([\s\S]+?)}}/g;var r=c()(t);try{n=r({spaces_count:e})}catch(o){n=t}return n},w=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new l.a({}),r=n.key("textForShowRemainingPlaces")||"{{spaces_count}}",o=n.key("oneSpace")||"space",a=n.key("multipleSpaces")||"spaces",i=n.key("soldOut")||"Sold out";return t<=0?i:e>t?"Only ".concat(t," ").concat(1===t?o:a):_(r,1===t?"".concat(t," ").concat(o):"".concat(t," ").concat(a))},S=function(t){var e=g(t.properties,["units","booking-party","booking-units"]);return e?~~e:t.quantity},T=function t(e){var n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],a=y(e);try{for(a.s();!(n=a.n()).done;){var i=n.value;i instanceof Array?t(i,r-1,o):o.push(i)}}catch(u){a.e(u)}finally{a.f()}return o},j=function(t,e,n,r){var a=o.a.tz(r),i=a.clone().startOf("day"),u=a.clone().add(e,"seconds").startOf("day"),c=a.clone().add(n,"days").startOf("day");return t.reduce((function(t,l){var f=o.a.tz(l.date,r),d=!1;return l.available_slot_count>0&&f.isSameOrAfter(i)&&(e?f.isSameOrAfter(u)&&(n?c.isSameOrAfter(f)&&(d=!0):d=!0):n?c.isSameOrAfter(f)&&(d=!0):d=!0),d&&s.d(l.timeslots,(function(t){return o.a.tz(t.start,r).isSameOrAfter(a)}))&&t.push(l.date),t}),[])},x=function(t){return t.isDisabled?"0.5":t.isSelected?"0.8":"1"},D=function(t,e){var n=t.isSelected,r=t.isFocused,o=e.hover,a=e.backgroundColor;return o&&(n||r)&&(a=o.backgroundColor),a},k=function(t){return t?{control:function(e){return m(m({},e),m(m({},t),{},{boxShadow:"unset",borderColor:"".concat(t.color," !important")}))},menu:function(e){return m(m(m({},e),t),{zIndex:2})},option:function(e,n){return m(m({},e),{color:t.color,opacity:x(n),backgroundColor:D(n,t)})},singleValue:function(e){return m(m({},e),t)},placeholder:function(e){return m(m({},e),m({},t))}}:{}},A=function(t){var e="5px",n="16px";return t>=220&&t<250?e="4px":t<220&&(e="3px",t<165&&(n="12px")),{padding:e,fontSize:n}},P=function(t){return new Intl.NumberFormat("en-US",{minimumFractionDigits:2,maximumFractionDigits:2}).format(t)},I=function(t,e){var n="",r="",o=t.items.find((function(t){return"ok"!==t.status}));return o&&(n=O(o.status).replace("_"," "),r=O(Object(d.c)(o.status,e))),{fullMessage:r,shortMessage:n}},R=function(t,e){return t.sort((function(t,n){var r=t[e].trim(),o=n[e].trim();return r!==o?r<o?-1:1:0}))}},1177:function(t,e,n){"use strict";var r=n(1237),o=n.n(r);n.d(e,"d",(function(){return o.a}));var a=n(1238),i=n.n(a);n.d(e,"j",(function(){return i.a}));n(1239);var u=n(1240),c=n.n(u);n.d(e,"l",(function(){return c.a}));var s=n(1241),l=n.n(s);n.d(e,"m",(function(){return l.a}));var f=n(1256),d=n.n(f);n.d(e,"i",(function(){return d.a}));n(1215);var p=n(1242),m=n.n(p);n.d(e,"n",(function(){return m.a}));var v=n(1243),y=n.n(v);n.d(e,"c",(function(){return y.a}));var h=n(1244),b=n.n(h);n.d(e,"e",(function(){return b.a}));var O=n(230),E=n.n(O);n.d(e,"h",(function(){return E.a}));var g=n(1212),_=n.n(g);n.d(e,"g",(function(){return _.a}));n(1245),n(1246);var w=n(1247),S=n.n(w);n.d(e,"a",(function(){return S.a}));var T=n(1248),j=n.n(T);n.d(e,"k",(function(){return j.a}));var x=n(1249),D=n.n(x);n.d(e,"f",(function(){return D.a}));n(1250);var k=n(1251),A=n.n(k);n.d(e,"b",(function(){return A.a}))},1186:function(t,e,n){"use strict";function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}n.d(e,"a",(function(){return o}));var o=function(){function t(e){var n=e.translation,r=void 0===n?{}:n,o=e.defaultTranslation,a=void 0===o?{}:o;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.translation=r,this.defaultTranslation=a}var e,n,o;return e=t,(n=[{key:"key",value:function(t){return this.translation[t]||this.defaultTranslation[t]}}])&&r(e.prototype,n),o&&r(e,o),t}()},1187:function(t,e,n){"use strict";n.d(e,"p",(function(){return u})),n.d(e,"n",(function(){return c})),n.d(e,"o",(function(){return s})),n.d(e,"a",(function(){return l})),n.d(e,"c",(function(){return f})),n.d(e,"m",(function(){return p})),n.d(e,"k",(function(){return m})),n.d(e,"l",(function(){return v})),n.d(e,"i",(function(){return h})),n.d(e,"e",(function(){return O})),n.d(e,"d",(function(){return E})),n.d(e,"g",(function(){return g})),n.d(e,"h",(function(){return _})),n.d(e,"f",(function(){return w})),n.d(e,"b",(function(){return S})),n.d(e,"j",(function(){return T}));n(76),n(206),n(348),n(133),n(173),n(83),n(228),n(229),n(59),n(608);var r=n(400),o=n.n(r),a=n(1168),i=n(1252),u=function(t){var e=~~(t/60),n=t%60;return t>0?"".concat(Object(a.m)(e,2),":").concat(Object(a.m)(n,2)):"00:00"},c=function(t){var e=o()(t).unix()-o()().unix();return e>0?e:0},s=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window.bta.locale;return"en"===t.substr(0,2)?"h:mm A":"HH:mm"},l=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window.bta.locale;return"en"===t.substr(0,2)?"hh:mm A":"HH:mm"},f=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=window.bta.dateFormat,r=n||"ll";return t?r:"".concat(r," ").concat(s()," ").concat(e?"z":"")},d=function(t){var e=window.bta.dateFormat;return 8===e.length?o()(t,"".concat(e,"YY")):o()(t,e)},p=function(t){return o()(function(t){var e=t.trim().toLowerCase();return e.includes("de")?e.replace("de","am"):e.includes("du")?e.replace("du","pm"):e}(t),["h:m a","H:m"])},m=function(t,e){var n=o()(t,e);return!(null==n||!n.isValid())&&"Invalid date"!==n.format("YYYY-MM-DD")},v=function(t){var e=!1;switch(t.length){case 10:e=i.c;break;case 16:e=i.a;break;case 19:e=i.b}if(!e)return!1;var n=o()(t,e);return!(null==n||!n.isValid())&&n.format(e)===t},y=function(t){return JSON.parse(window.bta.dateTimeNames)[t]},h=function(t,e,n,r,a,i){var u=new Date(t),c=new Date(e),s=a||"h:mm a",l=i||"MMM D, YYYY",f=o.a.tz(u,r).format(s),d=o.a.tz(c,r).format(s),p=o.a.tz(c,r).format(l),m=o.a.tz(u,r).format(l),v=m==p;return[v?f+"-"+d:f+" "+m,v?m:d+" "+p]},b=function(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=!1;r&&r.date&&r.date.format&&(i={type:"date",format:r.date.format});var u=Object(a.d)(t,e,i);if(16===u.length)return u;var c=/^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}$/;if(c.test(u))return u;if(u.length>16)return o()(u,f(!1,!1)).format().substr(0,16);if(u){var s=d(u),l=!1;r&&r.time&&(l={type:"time"});var m=Object(a.d)(t,n,l);if(m){var v=p(m.split("-")[0]),y=s.set({hour:v.get("hour"),minute:v.get("minute"),second:v.get("second")});return y.format().substr(0,16)}return s.format("YYYY-MM-DD")}return!1},O=function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return b(t,y("start_date_names"),y("start_time_names"),e)},E=function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return b(t,y("end_date_names"),y("end_time_names"),e)},g=function(t,e,n){var r,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";switch(a){case"casual":r="h:mm a";break;case"24_hours":r="HH:mm";break;default:r=s(e)}return o.a.tz(t,n).format(r)},_=function(t,e){return[e,t.toFixed(2)].join("")},w=function(t,e){return o.a.tz(t,e).format(f(!1,!1))},S=function(){switch(window.bta.dateFormat){case"MM/DD/YYYY":return"MMMM DD, YYYY";case"DD/MM/YYYY":return"DD MMMM YYYY";case"YYYY/MM/DD":return"YYYY MMMM DD";default:return"MMMM DD, YYYY"}},T=function(t,e,n){var r,a=o.a.tz(t,e).clone();if(n){var i=n<12?n:12;a.startOf("day"),(r=a.clone().startOf("day")).add(i,"months")}else a.startOf("month"),7!==a.isoWeekday()&&a.startOf("week"),a.startOf("day"),(r=a.clone().startOf("day")).add(42,"days");return{start:a,finish:r}}},1201:function(t,e,n){"use strict";function r(t){return"1"===t||"true"===t||"0"!==t&&"false"!==t&&t}n.d(e,"a",(function(){return r}))},1213:function(t,e,n){"use strict";n.d(e,"f",(function(){return E})),n.d(e,"e",(function(){return g})),n.d(e,"c",(function(){return _})),n.d(e,"b",(function(){return w})),n.d(e,"a",(function(){return S})),n.d(e,"g",(function(){return T})),n.d(e,"h",(function(){return j})),n.d(e,"d",(function(){return x})),n.d(e,"i",(function(){return D}));n(41),n(578),n(8),n(11),n(76),n(7),n(10),n(9),n(680),n(40),n(45),n(49),n(57),n(58);var r=n(400),o=n.n(r),a=n(233),i=n(1612),u=n.n(i),c=n(1384),s=n.n(c),l=n(1252);function f(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function d(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?f(Object(n),!0).forEach((function(e){p(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function p(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var m=window.bta.proxyBaseUrl,v=a.a.init(window.bta.apiToken,{apiBaseUrl:window.bta.apiBaseUrl}),y=function(){return!!window.bta.apiToken},h=function(t,e){var n={},r=0;return t.forEach((function(t){t.timeslots.forEach((function(t){var a=o()(t.start).tz(e).format(l.c);n[a]||(n[a]={id:r,year:o()(t.start).tz(e).format("YYYY"),month:o()(t.start).tz(e).format("MM"),date:o()(t.start).tz(e).format(l.c),timeslots:[]},r++),n[a].timeslots.push(d(d({},t),{},{date:o()(t.start).tz(e).format(l.c),start:t.start,finish:t.finish}))}))})),Object.values(n)},b=function(t,e){var n=[];return t.forEach((function(t){t.timeslots.forEach((function(t){n.push(d(d({},t),{},{start:o()(t.start).tz(e).toDate(),finish:o()(t.finish).tz(e).toDate()}))}))})),n},O=function(t){var e=window.bta.timeZone;return d(d({},t),{},{frames:h(t.frames,e),flattenTimeSlots:b(t.frames,e),lastOccurrence:t.last_occurrence?o()(t.last_occurrence).tz(e).format(l.c):null,nextOccurrence:t.next_occurrence?o()(t.next_occurrence).tz(e).format(l.c):null})},E=function(t){var e={external_id:t.external_id,start:t.start,finish:t.finish,location_id:t.location_id,is_events_list:t.is_events_list};return y()?v.getFrames(e).then((function(t){var e=t.data;return Promise.resolve(O(e))})):u.a.get("".concat(m,"/api/v1/frames"),{params:d(d({},e),{},{shop:window.bta?window.bta.shop:null})}).then((function(t){var e=t.data;return Promise.resolve(O(e))}))},g=function(t){var e={external_id:t.external_id,start:t.start,finish:t.finish};return y()?v.getCourseFrames(e).then((function(t){var e=t.data;return Promise.resolve(O(e))})):u.a.get("".concat(m,"/api/v1/courses"),{params:d(d({},e),{},{shop:window.bta?window.bta.shop:null})}).then((function(t){var e=t.data;return Promise.resolve(O(e))}))},_=function(t){var e={external_id:t.external_id,start:t.start,finish:t.finish,location_ids:t.location_ids,resource_ids:t.resource_ids,interval:t.interval};return y()?v.getBlocks(e).then((function(t){var e=t.data;return Promise.resolve(d({},e))})):u.a.get("".concat(m,"/api/v1/blocks"),{params:d(d({},e),{},{shop:window.bta?window.bta.shop:null})}).then((function(t){var e=t.data;return Promise.resolve(d({},e))}))},w=function(t,e,n,r){var o={cart_token:window.xprops.cartToken,items:t,retry:n,check_waitlist:e,check_expires:r};return y()?v.createReservation(o):u.a.post("".concat(m,"/api/v1/reservations"),s.a.stringify(d(d({},o),{},{shop:window.bta?window.bta.shop:null})),{headers:{"Content-Type":"application/x-www-form-urlencoded"}})},S=function(t,e){return u.a.post("".concat(m,"/api/v1/products/").concat(t,"/waitlist"),s.a.stringify(d(d({},e),{},{shop:window.bta?window.bta.shop:null})),{headers:{"Content-Type":"application/x-www-form-urlencoded"}})},T=function(){if(y())return v.getProducts().then((function(t){return t.data})).catch((function(t){throw t}));var t={shop:window.bta?window.bta.shop:null};return u.a.get("".concat(m,"/api/v1/products"),{params:t}).then((function(t){return t.data})).catch((function(t){throw t}))},j=function(t){if(window.xprops&&window.xprops.appUrl){var e=window.xprops.appUrl,n=new URL(e),r="".concat(n.protocol,"//").concat(n.host,"/availability/schedule.json");return u.a.get(r,{params:t}).then((function(t){return t.data})).catch((function(t){throw t}))}return Promise.reject(new Error("getSchedules - no window.xprops..."))},x=function(t){if(window.xprops&&window.xprops.appUrl){var e=window.xprops.appUrl,n=new URL(e),r="".concat(n.protocol,"//").concat(n.host,"/calendar/events.json");return u.a.get(r,{params:t}).then((function(t){return t.data})).catch((function(t){throw t}))}return Promise.reject(new Error("getCalendarEvents - no window.xprops..."))},D=function(){if(window.xprops&&window.xprops.appUrl){var t=window.xprops.appUrl,e=new URL(t),n="".concat(e.protocol,"//").concat(e.host,"/widgets/upcoming_events_products");return u.a.get(n,{params:{start:o()().utc().add(15,"minute").format("YYYY-MM-DDTHH:mm"),finish:o()().utc().add(5,"month").format("YYYY-MM-DDTHH:mm")}}).then((function(t){return t.data})).catch((function(t){throw t}))}return Promise.reject(new Error("getUpcomingEventsProducts - no window.xprops..."))}},1230:function(t,e,n){"use strict";n.r(e),n.d(e,"SET_DATE_RANGE",(function(){return d})),n.d(e,"SET_ORDER_DETAILS",(function(){return p})),n.d(e,"SET_SELECTED_OPTION",(function(){return m})),n.d(e,"SET_SELECTED_VARIANT",(function(){return v})),n.d(e,"SET_SELECTED_TERM",(function(){return y})),n.d(e,"SET_TIMESLOT",(function(){return h})),n.d(e,"SET_SELECTED_LOCATION",(function(){return b})),n.d(e,"SET_SELECTED_RESOURCE",(function(){return O})),n.d(e,"SET_BOOKING_FIELDS",(function(){return E})),n.d(e,"SET_BOOKINGS",(function(){return g})),n.d(e,"SET_CURRENT_MONTH",(function(){return _})),n.d(e,"CHANGE_ADDITIONAL_DETAILS",(function(){return w})),n.d(e,"ADD_REPEATED_FIELD_ITEMS",(function(){return S})),n.d(e,"REMOVE_REPEATED_FIELD_ITEMS",(function(){return T})),n.d(e,"SET_ADDITIONAL_DETAILS_VALIDATION_ERRORS",(function(){return j})),n.d(e,"setOrderDetails",(function(){return x})),n.d(e,"setSelectedTimeslot",(function(){return D})),n.d(e,"setSelectedVariant",(function(){return k})),n.d(e,"setSelectedLocation",(function(){return A})),n.d(e,"setSelectedResource",(function(){return P})),n.d(e,"setTimeSlot",(function(){return I})),n.d(e,"setDateRange",(function(){return R})),n.d(e,"setSelectedTerm",(function(){return L})),n.d(e,"setBookingFields",(function(){return C})),n.d(e,"changeAdditionalDetails",(function(){return M})),n.d(e,"onAddRepeatedFieldItems",(function(){return N})),n.d(e,"onRemoveRepeatedFieldItems",(function(){return Y})),n.d(e,"onSetDetailsErrors",(function(){return F})),n.d(e,"setVariantsQuantity",(function(){return B})),n.d(e,"resetVariantsQuantity",(function(){return U})),n.d(e,"submitOrder",(function(){return $})),n.d(e,"submitClassOrder",(function(){return q})),n.d(e,"submitEventsListOrder",(function(){return z})),n.d(e,"submitCourseOrder",(function(){return G})),n.d(e,"submitAppointment",(function(){return H})),n.d(e,"submitRentalOrder",(function(){return V}));n(83),n(229),n(149),n(35),n(74),n(45),n(180),n(8),n(208),n(7),n(10),n(9),n(206),n(207),n(40),n(49),n(57),n(41),n(58);var r=n(400),o=n.n(r),a=n(1177),i=n(1213);function u(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function c(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?u(Object(n),!0).forEach((function(e){s(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function s(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function l(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(t)))return;var n=[],r=!0,o=!1,a=void 0;try{for(var i,u=t[Symbol.iterator]();!(r=(i=u.next()).done)&&(n.push(i.value),!e||n.length!==e);r=!0);}catch(c){o=!0,a=c}finally{try{r||null==u.return||u.return()}finally{if(o)throw a}}return n}(t,e)||function(t,e){if(!t)return;if("string"===typeof t)return f(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return f(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function f(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var d="SET_DATE_RANGE",p="SET_ORDER_DETAILS",m="SET_SELECTED_OPTION",v="SET_SELECTED_VARIANT",y="SET_SELECTED_TERM",h="SET_TIMESLOT",b="SET_SELECTED_LOCATION",O="SET_SELECTED_RESOURCE",E="SET_BOOKING_FIELDS",g="SET_BOOKINGS",_="SET_CURRENT_MONTH",w="CHANGE_ADDITIONAL_DETAILS",S="ADD_REPEATED_FIELD_ITEMS",T="REMOVE_REPEATED_FIELD_ITEMS",j="SET_ADDITIONAL_DETAILS_VALIDATION_ERRORS",x=function(t){return{type:p,value:t}},D=function(t){return{type:m,value:t}},k=function(t){return{type:v,value:t}},A=function(t){return{type:b,value:t}},P=function(t){return{type:O,value:t}},I=function(t){return{type:h,value:t}},R=function(t){return{type:d,value:t}},L=function(t){return{type:y,value:t}},C=function(t){return{type:E,value:t}},M=function(t,e,n){return{type:w,field:t,value:e,index:n}};function N(t){return{type:S,fieldsSettings:t}}function Y(t,e){return{type:T,fieldsSettings:t,index:e}}function F(t){return{type:j,errors:t}}var B=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.singleVariant,o=void 0!==r&&r;return function(n,r){var i=r(),u=i.product.data,f=i.order.variants,d=l(t.split("_"),2),m=d[0],v=d[1];o&&(f={});var y=f[m];y?y[v]=+e||0:(y=a.d(u.variants,(function(t){return"".concat(t.external_id)==="".concat(m)})),f[m]=c(c({},y),{},s({field:v},v,+e||0))),n(k(+m));var h=a.l(a.i(f,(function(t,e){return f[e].quantity*(f[e].unit_multiplier||1)}))),b=a.l(a.i(f,(function(t,e){return f[e].quantity*f[e].price})));n({type:p,value:{variants:f,totalQuantity:h,totalPrice:b}})}},U=function(){return function(t,e){var n=e(),r=n.product.data,i=n.order,u=i.variants,s=i.date,l=s?o()(s).toDate():null,f=a.c(r.seasonal_rates,(function(t){var e=o()(t.starts_at).toDate(),n=o()(t.finishes_at).toDate();return l&&l>=e&&l<=n}));a.f(u,(function(t,e){a.k(f,(function(t){t.season===u[e].options[0]&&(t.rate,u[e].options[1])}))||(u[e]=c(c({},u[e]),{},{quantity:0}))}));var d=a.l(a.i(u,(function(t,e){return u[e].quantity}))),m=a.l(a.i(u,(function(t,e){return u[e].quantity*u[e].price})));t({type:p,value:{variants:u,totalQuantity:d,totalPrice:m}})}},$=function(){return function(t,e){var n=e(),r=n.order,o=r.date,u=r.selectedTimeslot,c=r.variants,s=r.selectedLocation,l=n.frames.frames.find((function(t){return t.date===o})),f="object"===typeof u?u.start:u,d=l.timeslots.find((function(t){return t.start===f})),p=a.c(c,(function(t){return!!t.quantity})).map((function(t){return{externalId:t.external_id,quantity:t.quantity,location_name:s?s.name:null,start:d.start}}));return Object(i.b)(p)}},q=function(){return function(t,e){var n=e(),r=n.order,o=r.date,u=r.selectedTimeslot,c=r.variants,s=r.quantity,l=void 0===s?1:s,f=r.selectedLocation,d=n.frames.frames.find((function(t){return t.date===o})),p=u.start,m=d.timeslots.find((function(t){return t.start===p})),v=a.c(c,(function(t){return!!t.quantity})).map((function(t){return{externalId:t.external_id,quantity:l,location_name:f?f.name:null,start:m.start}}));return Object(i.b)(v)}},z=function(){return function(t,e){var n=e(),r=n.order,o=(r.variantSelected,r.selectedTimeslot),u=r.variants,c=r.quantity,s=void 0===c?1:c,l=r.selectedLocation,f=n.frames.frames.find((function(t){return t.date===o.date})),d=o.start,p=f.timeslots.find((function(t){return t.start===d})),m=a.c(u,(function(t){return!!t.quantity})).map((function(t){return{externalId:t.external_id,quantity:s,location_name:l?l.name:null,start:p.start}}));return Object(i.b)(m)}},G=function(){return function(t,e){var n=e(),r=n.order,a=r.variantSelected,u=r.termSelected,c=r.quantity,s=void 0===c?1:c,l=r.selectedLocation,f=n.product.data.duration,d=u.start_date,p=u.finish_date;o()(d).format()!==o()(p).subtract(f,"seconds").format()&&(p=o()(p).add(f,"seconds").format());var m=[{externalId:a,quantity:s,location_name:l?l.name:null,start:o.a.tz(d,window.bta.timeZone).utc().format(),finish:o.a.tz(p,window.bta.timeZone).utc().format()}];return Object(i.b)(m)}},H=function(){return function(t,e){var n=e().order,r=n.variantSelected,a=n.selectedLocation,u=n.selectedResource,c=n.timeSlot,s=n.bookingFields,l=n.quantity,f=[{externalId:r,quantity:void 0===l?1:l,resource_name:u?u.name:null,location_name:a?a.name:null,start:o.a.tz(c.timeSlot.start,window.bta.timeZone).utc().format(),finish:o.a.tz(c.timeSlot.finish,window.bta.timeZone).utc().format(),fields:s}];return Object(i.b)(f)}},V=function(){return function(t,e){var n=e().order,r=n.variantSelected,o=n.dateRange,a=n.bookingFields,u=n.selectedLocation,c=[{externalId:r,quantity:1,start:o.start,finish:o.finish,duration:o.duration,fields:a,location_name:u?u.name:null}];return Object(i.b)(c)}}},1231:function(t,e,n){"use strict";n.r(e),n.d(e,"SET_STYLE",(function(){return r})),n.d(e,"SET_SETTING",(function(){return o})),n.d(e,"SET_CONFIGURATION",(function(){return a})),n.d(e,"SET_TRANSLATION",(function(){return i})),n.d(e,"SET_DEFAULT_TRANSLATION",(function(){return u})),n.d(e,"SET_DEFAULT_SETTING",(function(){return c})),n.d(e,"SET_TIME_ZONE",(function(){return s})),n.d(e,"SET_URL_PARAM",(function(){return l})),n.d(e,"setStyle",(function(){return f})),n.d(e,"setSetting",(function(){return d})),n.d(e,"setConfiguration",(function(){return p})),n.d(e,"setTranslation",(function(){return m})),n.d(e,"setDefaultTranslation",(function(){return v})),n.d(e,"setDefaultSetting",(function(){return y})),n.d(e,"setTimeZone",(function(){return h})),n.d(e,"setUrlParam",(function(){return b}));var r="SET_STYLE",o="SET_SETTING",a="SET_CONFIGURATION",i="SET_TRANSLATION",u="SET_DEFAULT_TRANSLATION",c="SET_DEFAULT_SETTING",s="SET_LOCAL_TIME_ZONE",l="SET_URL_PARAM",f=function(t){return{type:r,value:t}},d=function(t,e){return{type:o,key:t,value:e}},p=function(t){return{type:a,value:t}},m=function(t,e){return{type:i,value:e,key:t}},v=function(t){return{type:u,value:t}},y=function(t){return{type:c,value:t}},h=function(t){return{type:s,value:t}},b=function(t,e){return{type:l,key:t,value:e}}},1233:function(t,e,n){"use strict";n.d(e,"a",(function(){return r})),n.d(e,"b",(function(){return o})),n.d(e,"d",(function(){return a})),n.d(e,"c",(function(){return i}));n(1304),n(8),n(11),n(1213);var r="SET_PRODUCT",o="SET_PRODUCT_TERMS_LOADED",a=function(t,e){return{type:o,termId:t,value:e}},i=function(t){return function(e){return e({type:r,value:t}),Promise.resolve(t)}}},1252:function(t,e,n){"use strict";n.d(e,"c",(function(){return r})),n.d(e,"a",(function(){return o})),n.d(e,"b",(function(){return a}));var r="YYYY-MM-DD",o="YYYY-MM-DDTHH:mm",a="YYYY-MM-DDTHH:mm:ss"},1291:function(t,e,n){var r=n(1531),o={escape:n(1534),evaluate:n(1535),interpolate:n(1292),variable:"",imports:{_:{escape:r}}};t.exports=o},1292:function(t,e){t.exports=/<%=([\s\S]+?)%>/g},1293:function(t,e,n){var r=n(258),o=n(256),a=n(1275);t.exports=function(t){if(!o(t))return!1;var e=r(t);return"[object Error]"==e||"[object DOMException]"==e||"string"==typeof t.message&&"string"==typeof t.name&&!a(t)}},1294:function(t,e,n){"use strict";n.d(e,"c",(function(){return p})),n.d(e,"a",(function(){return m})),n.d(e,"b",(function(){return v}));n(83),n(257),n(41),n(228),n(149),n(59),n(35),n(578),n(7),n(8),n(593),n(10),n(9),n(40),n(45),n(49),n(57),n(58),n(180),n(208),n(207),n(206),n(74);var r=n(400),o=n.n(r),a=n(1382);function i(t){return function(t){if(Array.isArray(t))return u(t)}(t)||function(t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"===typeof t)return u(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return u(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function u(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function c(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function s(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?c(Object(n),!0).forEach((function(e){l(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function l(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var f=new(n(1186).a)({defaultTranslation:{cutoffConflictMessage:"date for accepting bookings is cut off",blackoutConflictMessage:"there is a blackout in effect",openConflictMessage:"the shop is not open at this time",scheduleConflictMessage:"it is not scheduled at this time",bookingConflictMessage:"item is fully booked at the requested time",resourcesConflictMessage:"another product with the same resources and datetime exists in the cart",pastDateConflictMessage:"can't be in the past"}}),d=function(t,e){return t.key(e)||f.key(e)},p=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:f;switch(t){case"ok":return"success";case"cutoff_conflict":return d(e,"cutoffConflictMessage");case"blackout_conflict":return d(e,"blackoutConflictMessage");case"open_conflict":return d(e,"openConflictMessage");case"schedule_conflict":return d(e,"scheduleConflictMessage");case"booking_conflict":return d(e,"bookingConflictMessage");case"resources_conflict":return d(e,"resourcesConflictMessage");default:var n=t?t.match(/can't be in the past/):"Error";return n?d(e,"pastDateConflictMessage"):t}},m=function(t,e){var n,r,i=e.data,u=i.items,c=i.variants,l=i.errors,f=(n=Object(a.a)(t),r=c,n.reduce((function(t,e){var n=r.find((function(t){return t.external_id===e.external_id}));return t.push(s(s({},e),n)),t}),[]));return u?u.forEach((function(t){var e=+t.match(/\[(\d+)\]/)[1],n=t.match(/[^\[]+(?=\])/g)[1],r="Invalid date"===o()(n).format()?void 0:o.a.tz(n,window.bta.timeZone),a=t.match(/items\[\d+\]\[[^\[]+\]\[[^\[]+\]: \[\"(.+)\"\]/)[1],i=f.find((function(t){var n=r?t.start===r.clone().format().substr(0,16)||t.start===r.clone().format("YYYY-MM-DD"):!t.start;return t.external_id===e&&n}));i||(i=f.find((function(t){return t.external_id===e}))),i.status=function(t){var e=t.match(/\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}Z/g);return e&&e.forEach((function(e){t=t.replace(e,o.a.tz(e,window.bta.timeZone).format("LLL (z)"))})),t}(a,window.bta.timeZone)})):l.forEach((function(t){f.find((function(e){return e.external_id===t.external_id})).status=t.messages.length?t.messages.join(", "):"Error"})),f},v=function(t,e,n){var r=Object.values(t).map((function(t){return{variant_id:t.external_id,quantity:t.quantity}}));return i(new Set(m(r,e).map((function(t){return p(t.status,n)}))))}},1299:function(t,e,n){"use strict";n.r(e),n.d(e,"SET_FRAMES",(function(){return m})),n.d(e,"SET_FRAMES_FRAMES",(function(){return v})),n.d(e,"FETCH_FRAME_LOADING",(function(){return y})),n.d(e,"SET_GOT_PAGE",(function(){return h})),n.d(e,"SET_TIME_SLOTS",(function(){return b})),n.d(e,"FETCH_TIME_SLOT_LOADING",(function(){return O})),n.d(e,"SET_EXTERNAL_ID_SELECTED",(function(){return E})),n.d(e,"SET_BLACKOUTS",(function(){return g})),n.d(e,"SET_AVAILABLE_BLOCKS",(function(){return _})),n.d(e,"SET_BOOKED_BLOCKS",(function(){return w})),n.d(e,"SET_NON_AVAILABLE_BLOCKS",(function(){return S})),n.d(e,"SET_CURRENT_MONTH",(function(){return T})),n.d(e,"setFrames",(function(){return j})),n.d(e,"setFramesFrames",(function(){return x})),n.d(e,"fetchFrameLoading",(function(){return D})),n.d(e,"setBlackouts",(function(){return k})),n.d(e,"setAvailableBlocks",(function(){return A})),n.d(e,"setGotPage",(function(){return P})),n.d(e,"setBookedBlocks",(function(){return I})),n.d(e,"setNonAvailableBlocks",(function(){return R})),n.d(e,"setTimeSlotsLoading",(function(){return L})),n.d(e,"setCurrentMonth",(function(){return C})),n.d(e,"setTimeSlots",(function(){return M})),n.d(e,"fetchBlocksLoading",(function(){return N})),n.d(e,"setVariantSelected",(function(){return Y})),n.d(e,"setBlocks",(function(){return B})),n.d(e,"fetchCourseFrames",(function(){return U})),n.d(e,"fetchFrames",(function(){return $})),n.d(e,"fetchBlocks",(function(){return q})),n.d(e,"changeFramesTimezone",(function(){return z}));var r=n(1304),o=n.n(r),a=(n(41),n(149),n(8),n(11),n(10),n(7),n(9),n(35),n(76),n(40),n(45),n(49),n(57),n(58),n(400)),i=n.n(a),u=n(1213),c=n(1233);function s(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function l(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?s(Object(n),!0).forEach((function(e){f(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function f(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function d(t,e,n,r,o,a,i){try{var u=t[a](i),c=u.value}catch(s){return void n(s)}u.done?e(c):Promise.resolve(c).then(r,o)}function p(t){return function(){var e=this,n=arguments;return new Promise((function(r,o){var a=t.apply(e,n);function i(t){d(a,r,o,i,u,"next",t)}function u(t){d(a,r,o,i,u,"throw",t)}i(void 0)}))}}var m="SET_FRAMES",v="SET_FRAMES_FRAMES",y="FETCH_FRAME_LOADING",h="SET_GOT_PAGE",b="SET_TIME_SLOTS",O="FETCH_TIME_SLOT_LOADING",E="SET_EXTERNAL_ID_SELECTED",g="SET_BLACKOUTS",_="SET_AVAILABLE_BLOCKS",w="SET_BOOKED_BLOCKS",S="SET_NON_AVAILABLE_BLOCKS",T="SET_CURRENT_MONTH",j=function(t){return{type:m,value:t}},x=function(t){return{type:v,frames:t}},D=function(t){return{type:y,value:t}},k=function(t){return{type:g,value:t}},A=function(t){return{type:_,value:t}},P=function(t){return{type:h,value:t}},I=function(t){return{type:w,value:t}},R=function(t){return{type:S,value:t}},L=function(t){return{type:O,value:t}},C=function(t){return{type:T,value:t}},M=function(t){return{type:b,value:t}},N=function(t){return{type:O,value:t}},Y=function(t){return{type:E,value:t}},F=function(t,e){var n=[];if(t)return t.forEach((function(t){t.timeslots.forEach((function(t){var r=i.a.tz(t.start,e).format("YYYY-MM-DD"),o=n.find((function(t){return t.date===r}));o?o.timeslots.push(t):n.push({date:r,timeslots:[t]})}))})),n},B=function(t,e){var n=function(t,e){var n=[];return t.forEach((function(t){t.timeslots.forEach((function(t){var r=i.a.tz(t.start,e).format("YYYY-MM-DD"),o=1===t.status?1:0,a=n.find((function(t){return t.date===r}));a?(a.timeslots.push(t),a.available_slot_count+=o):n.push({date:r,timeslots:[t],available_slot_count:o})}))})),n}(t,e);return function(t){t(M(n)),t(k(n)),t(I(n)),t(A(n)),t(R(n))}},U=function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return function(n,r){return n(D(!0)),new Promise(function(){var a=p(o.a.mark((function a(s,l){var f,d,p,m,v,y,h,b,O,E,g;return o.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:f=r(),d=f.frames.cachedParams,p={},m=[],v=[],y=o.a.mark((function r(a){var s,f,y,h,b;return o.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(s=t[a],f=s.termId,y=s.start,h=s.finish,e&&d.find((function(t){return i()(t.start).isSame(y)&&i()(t.finish).isSame(h)}))){r.next=20;break}return r.prev=3,r.next=6,Object(u.e)({external_id:window.bta.externalId,start:y,finish:h});case 6:b=r.sent,m=m.concat(b.frames),v=v.concat(b.flattenTimeSlots),(p=b).frames=m,p.flattenTimeSlots=v,n(Object(c.d)(f,!0)),n(j(p)),r.next=20;break;case 16:r.prev=16,r.t0=r.catch(3),n(D(!1)),l(r.t0);case 20:case"end":return r.stop()}}),r,null,[[3,16]])})),h=0;case 6:if(!(h<t.length)){a.next=11;break}return a.delegateYield(y(h),"t0",8);case 8:h++,a.next=6;break;case 11:b=t.map((function(t){return t.start})),O=t.map((function(t){return t.finish})),E=new Date(Math.min.apply(null,b)),g=new Date(Math.max.apply(null,O)),n(P({start:E,finish:g})),n(D(!1)),s(p);case 18:case"end":return a.stop()}}),a)})));return function(t,e){return a.apply(this,arguments)}}())}},$=function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return function(n,r){return n(D(!0)),new Promise((function(o,a){var c=r(),s=c.frames.cachedParams,f=c.settings.timeZone,d=t.start,p=t.finish,m=t.location_id,v=t.isEventsList;e&&s.find((function(t){return i()(t.start).isSame(d)&&i()(t.finish).isSame(p)&&t.location_id===m}))?n(D(!1)):Object(u.f)({external_id:window.bta.externalId,start:d,finish:p,location_id:m,is_events_list:v}).then((function(t){var e=F(t.frames,f);n(j(l(l({},t),{},{frames:e}))),n(P({start:d,finish:p,location_id:m})),n(D(!1)),o(l(l({},t),{},{frames:e}))})).catch((function(t){n(D(!1)),a(t)}))}))}},q=function(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[],a=arguments.length>5?arguments[5]:void 0,i=arguments.length>6?arguments[6]:void 0;return function(c){c(L(!0));var s=r,l=o;if(t)return Array.isArray(r)||(s=[r]),Array.isArray(o)||(l=[o]),c(Y(t)),new Promise((function(r,o){Object(u.c)({start:e,finish:n,interval:a,external_id:t,location_ids:s,resource_ids:l}).then((function(t){var e=t.blocks?t.blocks:[];c(L(!1)),c(B(e,i)),r(t)})).catch((function(t){c(L(!1)),o(t)}))}))}},z=function(t){return function(e,n){var r=n().frames.frames;e(x(F(r,t)))}}},1380:function(t,e,n){"use strict";var r=n(425),o=n(150),a=n(426),i=(n(149),n(45),n(180),n(8),n(208),n(7),n(10),n(9),n(207),n(206),n(74),n(1)),u=n.n(i),c=n(1177),s=n(1233);function l(t){return function(t){if(Array.isArray(t))return f(t)}(t)||function(t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"===typeof t)return f(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return f(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function f(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var d={data:{},maxAvailability:0};n(49),n(41),n(35),n(133),n(173),n(40),n(57),n(58);var p=n(60),m=n.n(p),v=n(1299);function y(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function h(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?y(Object(n),!0).forEach((function(e){b(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):y(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function b(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function O(t){return t.length>0?t.filter((function(t){return 2===t.timeslots[0].status})):[]}function E(t){return t.length>0?t.filter((function(t){return 1===t.timeslots[0].status})):[]}function g(t,e){for(var n=new Date(t,e,1),r=[];n.getMonth()===e;)r.push(new Date(n)),n.setDate(n.getDate()+1);return r}var _={data:[],frames:[],blackouts:[],timeslots:[],cachedParams:[],externalId:null,nextOccurrence:"",availableBlocks:[],flattenTimeSlots:[],nonAvailableBlocks:[],isFetchingBlocks:!1,lastOccurrence:new Date,currentMonth:m()().toDate(),loading:!1};n(76),n(296);var w=n(1230);function S(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function T(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?S(Object(n),!0).forEach((function(e){j(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):S(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function j(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var x={totalPrice:0,date:null,available:0,quantity:1,totalQuantity:0,variants:{},timeSlot:null,selectedTimeslot:null,variantSelected:null,selectedLocation:null,selectedResource:null,termSelected:{},bookingFields:[],bookings:[],additionalDetails:{},additionalDetailsValidationErrors:[],currentMonth:m()(Date.now()).startOf("month")};var D=n(400),k=n.n(D),A=n(1201),P=n(1231);function I(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function R(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?I(Object(n),!0).forEach((function(e){L(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):I(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function L(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var C={style:{},setting:{},translation:{},defaultTranslation:{},defaultSetting:{},exceededTrialPlan:!1,bookingFields:[],timeZone:window.bta.timeZone||k.a.tz.guess(),quantityRange:!1,urlParams:{}};function M(t){for(var e in t){var n=t[e];["display_time_range","show_remaining_places","show_price","show_location_chooser","show_resource_chooser","show_location","display_legend"].includes(e)?t[e]=Object(A.a)(n):["when_expired","reservation_expiry_minutes"].includes(e)&&(t[e]=parseInt(n,10))}return t}var N=Object(o.combineReducers)({order:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:x,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case w.SET_ORDER_DETAILS:return T(T({},t),e.value);case w.SET_SELECTED_OPTION:return u()(t,{selectedTimeslot:{$set:e.value}});case w.SET_SELECTED_VARIANT:return u()(t,{variantSelected:{$set:e.value}});case w.SET_SELECTED_LOCATION:return u()(t,{selectedLocation:{$set:e.value}});case w.SET_SELECTED_RESOURCE:return u()(t,{selectedResource:{$set:e.value}});case w.SET_SELECTED_TERM:return u()(t,{termSelected:{$set:e.value}});case w.SET_TIMESLOT:return u()(t,{timeSlot:{$set:e.value}});case w.SET_DATE_RANGE:return u()(t,{dateRange:{$set:e.value}});case w.SET_BOOKING_FIELDS:return u()(t,{bookingFields:{$set:e.value}});case w.CHANGE_ADDITIONAL_DETAILS:if(e.field.repeated&&null!=e.index){var n=t.additionalDetails[e.field.key];return n[e.index]=e.value,u()(t,{additionalDetails:j({},e.field.key,{$set:n}),additionalDetailsValidationErrors:{$set:t.additionalDetailsValidationErrors.map((function(t){return t.key==="".concat(e.field.key,"-").concat(e.index)?T(T({},t),{},{fieldChanged:!0}):t}))}})}return u()(t,{additionalDetails:j({},e.field.key,{$set:e.value}),additionalDetailsValidationErrors:{$set:t.additionalDetailsValidationErrors.map((function(t){return t.key==="".concat(e.field.key)?T(T({},t),{},{fieldChanged:!0}):t}))}});case w.ADD_REPEATED_FIELD_ITEMS:var r=T({},t.additionalDetails);return(e.fieldsSettings||[]).forEach((function(t){t.repeated&&(r[t.key]||(r[t.key]=[]),r[t.key].push(""))})),u()(t,{additionalDetails:{$set:r}});case w.REMOVE_REPEATED_FIELD_ITEMS:r=T({},t.additionalDetails);return(e.fieldsSettings||[]).forEach((function(t){t.repeated&&(r[t.key]||(r[t.key]=[]),r[t.key].splice(e.index,1))})),u()(t,{additionalDetails:{$set:r}});case w.SET_ADDITIONAL_DETAILS_VALIDATION_ERRORS:return u()(t,{additionalDetailsValidationErrors:{$set:e.errors}});default:return t}},frames:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case v.SET_GOT_PAGE:var n=t.cachedParams;return n.push(e.value),u()(t,{cachedParams:{$set:n}});case v.SET_FRAMES:var r=e.value,o=r.frames,a=r.lastOccurrence,i=r.nextOccurrence,s=r.flattenTimeSlots;return o?(o.forEach((function(e){var n=c.d(t.frames,(function(t){return t.date===e.date}));n?e.timeslots.forEach((function(t){c.d(n.timeslots,(function(e){return e.start===t.start&&e.finish===t.finish&&e.location_id===t.location_id}))||n.timeslots.push(t)})):t.frames.push(h({},e))})),u()(t,{frames:{$set:t.frames},flattenTimeSlots:{$set:s},nextOccurrence:{$set:i},lastOccurrence:{$set:a||t.lastOccurrence}})):t;case v.SET_FRAMES_FRAMES:return u()(t,{frames:{$set:e.frames}});case v.SET_TIME_SLOTS:return u()(t,{timeslots:{$set:e.value||[]}});case v.SET_EXTERNAL_ID_SELECTED:return u()(t,{externalId:{$set:e.value}});case v.SET_BLACKOUTS:return u()(t,{blackouts:{$set:O(e.value)}});case v.SET_AVAILABLE_BLOCKS:return u()(t,{availableBlocks:{$set:E(e.value)}});case v.SET_NON_AVAILABLE_BLOCKS:var l=e.value[5]?g(m()(e.value[5].date).year(),m()(e.value[5].date).month()):[],f=e.value.map((function(t){return m()(t.date).toDate().getTime()})),d=l.filter((function(t){return!f.includes(t.getTime())}));return u()(t,{nonAvailableBlocks:{$set:d}});case v.FETCH_TIME_SLOT_LOADING:return u()(t,{isFetchingBlocks:{$set:e.value}});case v.SET_CURRENT_MONTH:return u()(t,{currentMonth:{$set:e.value}});case v.FETCH_FRAME_LOADING:return u()(t,{loading:{$set:e.value}});default:return t}},product:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case s.a:var n=0;switch(e.value.capacity.type){case 0:n=e.value.capacity.quantity;break;case 1:n=e.value.capacities?c.m(e.value.capacities.option_capacities,"capacity"):0;break;case 2:n=e.value.capacity.quantity}return u()(t,{data:{$set:e.value},maxAvailability:{$set:n}});case s.b:var r=l(t.data.terms),o=r.find((function(t){return t.id===e.termId}));return o.loaded=e.value,u()(t,{data:{terms:{$set:r}}});default:return t}},settings:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:C,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case P.SET_STYLE:return u()(t,{style:{$merge:e.value}});case P.SET_SETTING:return u()(t,{setting:{$merge:L({},e.key,e.value)}});case P.SET_CONFIGURATION:var n=e.value.bookingFields;return R(R(R({},t),e.value),{},{setting:M(e.value.setting||{}),exceededTrialPlan:e.value.exceededTrialPlan,bookingFields:n?JSON.parse(n):[],quantityRange:e.value.quantityRange,urlParams:e.value.urlParams});case P.SET_TRANSLATION:return u()(t,{translation:{$merge:L({},e.key,e.value)}});case P.SET_DEFAULT_TRANSLATION:return u()(t,{defaultTranslation:{$merge:e.value}});case P.SET_DEFAULT_SETTING:return u()(t,{defaultSetting:{$merge:M(e.value)}});case P.SET_TIME_ZONE:return u()(t,{timeZone:{$set:e.value}});case P.SET_URL_PARAM:return u()(t,{urlParams:{$merge:L({},e.key,e.value)}});default:return t}}}),Y=Object(o.createStore)(N,Object(a.composeWithDevTools)(Object(o.applyMiddleware)(r.a)));Y=Object(o.createStore)(N,Object(o.applyMiddleware)(r.a));e.a=Y},1382:function(t,e,n){"use strict";n.d(e,"a",(function(){return a}));var r=n(1168),o=n(1187),a=function(t){return t.reduce((function(t,e){var n={product_title:e.product_title,external_id:e.variant_id,quantity:Object(r.e)(e),status:"ok"};if(e.properties){var a=e.properties,i=a.Resource,u=a.Location;i&&(n.resource_name=i),u&&(n.location_name=u)}var c=!1;window.bta&&window.bta.dateFormat&&(c={date:{format:window.bta.dateFormat},time:!0});var s=Object(o.e)(e.properties,c);s&&(n.start=s);var l=Object(o.d)(e.properties,c);return l&&(n.finish=l),t.push(n),t}),[])}},1385:function(t,e){},1531:function(t,e,n){var r=n(1532),o=n(1207),a=/[&<>"']/g,i=RegExp(a.source);t.exports=function(t){return(t=o(t))&&i.test(t)?t.replace(a,r):t}},1532:function(t,e,n){var r=n(1533)({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});t.exports=r},1533:function(t,e){t.exports=function(t){return function(e){return null==t?void 0:t[e]}}},1534:function(t,e){t.exports=/<%-([\s\S]+?)%>/g},1535:function(t,e){t.exports=/<%([\s\S]+?)%>/g},1536:function(t,e,n){var r=n(1537),o=n(1538),a=n(1273),i=n(1539),u=n(1540),c=n(1293),s=n(1220),l=n(585),f=n(1292),d=n(1291),p=n(1207),m=/\b__p \+= '';/g,v=/\b(__p \+=) '' \+/g,y=/(__e\(.*?\)|\b__t\)) \+\n'';/g,h=/[()=,{}\[\]\/\s]/,b=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,O=/($^)/,E=/['\n\r\u2028\u2029\\]/g,g=Object.prototype.hasOwnProperty;t.exports=function(t,e,n){var _=d.imports._.templateSettings||d;n&&s(t,e,n)&&(e=void 0),t=p(t),e=r({},e,_,i);var w,S,T=r({},e.imports,_.imports,i),j=l(T),x=a(T,j),D=0,k=e.interpolate||O,A="__p += '",P=RegExp((e.escape||O).source+"|"+k.source+"|"+(k===f?b:O).source+"|"+(e.evaluate||O).source+"|$","g"),I=g.call(e,"sourceURL")?"//# sourceURL="+(e.sourceURL+"").replace(/\s/g," ")+"\n":"";t.replace(P,(function(e,n,r,o,a,i){return r||(r=o),A+=t.slice(D,i).replace(E,u),n&&(w=!0,A+="' +\n__e("+n+") +\n'"),a&&(S=!0,A+="';\n"+a+";\n__p += '"),r&&(A+="' +\n((__t = ("+r+")) == null ? '' : __t) +\n'"),D=i+e.length,e})),A+="';\n";var R=g.call(e,"variable")&&e.variable;if(R){if(h.test(R))throw new Error("Invalid `variable` option passed into `_.template`")}else A="with (obj) {\n"+A+"\n}\n";A=(S?A.replace(m,""):A).replace(v,"$1").replace(y,"$1;"),A="function("+(R||"obj")+") {\n"+(R?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(w?", __e = _.escape":"")+(S?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+A+"return __p\n}";var L=o((function(){return Function(j,I+"return "+A).apply(void 0,x)}));if(L.source=A,c(L))throw L;return L}},1537:function(t,e,n){var r=n(1208),o=n(1270),a=n(1203),i=o((function(t,e,n,o){r(e,a(e),t,o)}));t.exports=i},1538:function(t,e,n){var r=n(1272),o=n(1271),a=n(1293),i=o((function(t,e){try{return r(t,void 0,e)}catch(n){return a(n)?n:new Error(n)}}));t.exports=i},1539:function(t,e,n){var r=n(405),o=Object.prototype,a=o.hasOwnProperty;t.exports=function(t,e,n,i){return void 0===t||r(t,o[n])&&!a.call(i,n)?e:t}},1540:function(t,e){var n={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"};t.exports=function(t){return"\\"+n[t]}},1748:function(t,e,n){"use strict";var r=n(344),o=n.n(r),a=(o.a.shape({shopify_url:o.a.string,title:o.a.string,occurrence:o.a.instanceOf(Date),image_url:o.a.string,mindate:o.a.number}),o.a.shape({textColor:o.a.string,backgroundColor:o.a.string})),i=o.a.shape({bookingNotReserved:o.a.string,updateReservation:o.a.string,reservationExpired:o.a.string,success:o.a.string}),u=o.a.shape({mode:o.a.string,position:o.a.string,reservation_expiry_minutes:o.a.number,when_expired:o.a.number});o.a.oneOfType([u]),o.a.shape({theme:o.a.instanceOf(a),style:o.a.object,translation:o.a.oneOfType([i]),configuration:o.a.oneOfType([u])})},1789:function(t,e,n){"use strict";n.d(e,"a",(function(){return f}));n(76),n(41),n(72),n(73);var r=n(0),o=n.n(r);n(1790);function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function u(t,e){return(u=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function c(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=l(t);if(e){var o=l(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return s(this,n)}}function s(t,e){return!e||"object"!==typeof e&&"function"!==typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function l(t){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var f=function(t){!function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&u(t,e)}(l,t);var e,n,r,s=c(l);function l(){var t;a(this,l);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return(t=s.call.apply(s,[this].concat(n))).state={intervalList:[]},t}return e=l,(n=[{key:"show",value:function(){var t=this;this.state.intervalList.forEach((function(t){return clearInterval(t)})),this.setState({intervalList:[]},(function(){t.self.classList.add("ripple-show"),t.state.intervalList.push(setTimeout((function(){t.self.classList.remove("ripple-show")}),500))}))}},{key:"render",value:function(){var t=this;return o.a.createElement("div",{className:"ripple",ref:function(e){return t.self=e}},o.a.createElement("div",null),o.a.createElement("div",null))}}])&&i(e.prototype,n),r&&i(e,r),l}(r.Component)},1790:function(t,e,n){},2025:function(t,e,n){"use strict";n.d(e,"a",(function(){return h}));n(76),n(49),n(578),n(149),n(35),n(72),n(73),n(40),n(45),n(57),n(41),n(58),n(151);var r=n(0),o=n.n(r),a=n(1168),i=n(1177);n(2026);function u(){return(u=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t}).apply(this,arguments)}function c(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function s(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?c(Object(n),!0).forEach((function(e){l(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function l(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function f(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function d(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function p(t,e){return(p=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function m(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=y(t);if(e){var o=y(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return v(this,n)}}function v(t,e){return!e||"object"!==typeof e&&"function"!==typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function y(t){return(y=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var h=function(t){!function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&p(t,e)}(l,t);var e,n,r,c=m(l);function l(){return f(this,l),c.apply(this,arguments)}return e=l,(n=[{key:"parseTag",value:function(t,e){var n="".concat(t.key,"_").concat(e.header),r=e.propsStyle,a=s(s({},(void 0===r?{}:r).variantsTable),e.attrs[t.key].style);switch(e.type){case"number":var i=e.attrs[t.key].max,c=void 0===i?null:i,l=this.props.items[t.key],f=this.props.style.errorText,d=l?l.quantity:0,p=this.props.translation,m=c<this.quantity(t);return p.key("columnQuantity")===e.header&&(n="".concat(t.key,"_quantity")),o.a.createElement("div",{style:{position:"relative"}},o.a.createElement("input",{max:this.variantMaxAvailability(l,c),min:0,disabled:!c,name:n,type:"number",style:{backgroundColor:this.props.style.body.backgroundColor,color:m?f.color:a.color},onInput:e.onChange.bind(this),defaultValue:d}));case"button":return o.a.createElement("button",u({},e.attrs[t.key],{name:n,style:a,onClick:e.onClick.bind(this)}),e.content)}}},{key:"variantMaxAvailability",value:function(t,e){var n=this.props,r=n.capacityType,o=n.items;if(1==r||!e)return e;var a=Object.values(o).filter((function(e){return e!==t}));return e-i.m(a,"quantity")}},{key:"errorMessage",value:function(t){var e=this.props.extraColumns.find((function(t){return"number"===t.type}));if(e){var n=e.attrs[t.key].max,r=void 0===n?null:n,a=this.props.style.errorText;if(!(r>=this.quantity(t)))return o.a.createElement("tr",null,o.a.createElement("td",{colSpan:this.props.extraColumns.length+this.props.columns.headers.length},o.a.createElement("p",{style:{color:a.color,float:"right",margin:0}},this.props.limitedSpacesMessage||"Sorry, limited spaces available")))}}},{key:"quantity",value:function(t){var e,n,r=this.props,o=r.capacityType,a=r.items;return n=1===o?(e=a[t.key])?e.quantity:0:(e=Object.values(a)[0])?i.m(Object.values(a),"quantity"):0,n*(e?e.unit_multiplier:1)}},{key:"columnHead",value:function(){return this.props.columns.headers.map((function(t,e){return o.a.createElement("th",{style:{minWidth:"45px"},key:t+e},o.a.createElement("p",null,Object(a.b)(t)))}))}},{key:"columnBody",value:function(t){return this.props.columns.headers.map((function(e,n){return o.a.createElement("td",{key:t[e]+t.key+n},t[e])}))}},{key:"extraColumnsHead",value:function(){return this.props.extraColumns.map((function(t){return o.a.createElement("th",{key:t.header},o.a.createElement("p",null,Object(a.b)(t.header)))}))}},{key:"extraColumnsBody",value:function(t){var e=this;return this.props.extraColumns.map((function(n,r){return o.a.createElement("th",{key:n.header+t.key+r},e.parseTag(t,n))}))}},{key:"render",value:function(){var t=this,e=this.props,n=e.capacityType,r=e.columns.lists,a=e.hideHead,i=e.className,u=e.columnReverse;return o.a.createElement("section",{className:"fixed-thead",style:a?{paddingTop:"0"}:{}},o.a.createElement("div",{className:"table-container"},o.a.createElement("table",{className:"pure-table pure-form center fluid ".concat(i)},o.a.createElement("thead",{style:a?{display:"none"}:{}},o.a.createElement("tr",null,u&&this.extraColumnsHead(),this.columnHead(),!u&&this.extraColumnsHead())),o.a.createElement("tbody",null,r.map((function(e,r){return o.a.createElement(o.a.Fragment,null,o.a.createElement("tr",{key:e.key+r},u&&t.extraColumnsBody(e),t.columnBody(e),!u&&t.extraColumnsBody(e)),1===n&&t.errorMessage(e))})),r.length&&1!==n&&this.errorMessage(r[0])))))}}])&&d(e.prototype,n),r&&d(e,r),l}(r.Component)},2026:function(t,e,n){},2178:function(t,e,n){"use strict";n.r(e),n.d(e,"default",(function(){return ct}));var r={};n.r(r),n.d(r,"submitReservation",(function(){return K})),n.d(r,"default",(function(){return Q}));n(76),n(40),n(45),n(49),n(57),n(41),n(58),n(72),n(73);var o=n(0),a=n.n(o),i=n(292),u=n(150),c=n(1215),s=n.n(c),l=(n(35),n(684),n(133),n(173),n(151),n(400)),f=n.n(l),d=n(1212),p=n.n(d),m=(n(83),n(229),n(74),n(1279)),v=n(2025),y=n(1187),h=n(1294),b=n(1280);function O(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function E(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function g(t,e){return(g=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function _(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=S(t);if(e){var o=S(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return w(this,n)}}function w(t,e){return!e||"object"!==typeof e&&"function"!==typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function S(t){return(S=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var T=function(t){return"".concat(t.external_id,"_").concat(t.start)},j=function(t){!function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&g(t,e)}(i,t);var e,n,r,o=_(i);function i(){var t;O(this,i);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return(t=o.call.apply(o,[this].concat(n))).state={columns:t.columns(),extraColumns:t.extraColumns()},t}return e=i,(n=[{key:"columns",value:function(){var t=this,e=window.bta.timeZone;return{headers:["Item","Message","Qty","Start"],lists:this.props.items.map((function(n){return{key:T(n),Qty:n.quantity,Item:n.product_title,Start:f.a.tz(n.start,e).format(Object(y.c)(n["all_day?"])),Message:Object(h.c)(n.status,t.props.translation)}}))}}},{key:"extraColumns",value:function(){var t=this.props.items.reduce((function(t,e){return t[T(e)]={style:"ok"===e.status?{display:"none"}:{border:"none",background:"transparent"},key:T(e)},t}),{});return[{attrs:t,type:"button",content:a.a.createElement(m.a,{icon:b.e}),header:"remove",onClick:function(e){var n=e.currentTarget.name.split("_")[0],r=e.currentTarget.name.split("_remove")[0],o=Object.keys(t).indexOf(r)+1;o?window.xprops.onTrigger("removeItemByLineIndex",o):window.xprops.onTrigger("removeItems",[n])}}]}},{key:"render",value:function(){var t=this.props,e=t.items,n=t.show,r=t.style;return e&&e.length?a.a.createElement("div",{className:"ptb15",style:{display:n?"block":"none",borderBottom:"2px solid rgba(255, 255, 255, 0.6)",marginBottom:"5px",overflow:"scroll",maxHeight:"calc(80vh)"}},a.a.createElement(v.a,{style:r.body,columnReverse:!0,className:"fancy",items:e,columns:this.state.columns,extraColumns:this.state.extraColumns})):""}}])&&E(e.prototype,n),r&&E(e,r),i}(o.Component);function x(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function D(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function k(t,e){return(k=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function A(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=I(t);if(e){var o=I(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return P(this,n)}}function P(t,e){return!e||"object"!==typeof e&&"function"!==typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function I(t){return(I=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var R=function(t){!function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&k(t,e)}(i,t);var e,n,r,o=A(i);function i(){var t;x(this,i);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return(t=o.call.apply(o,[this].concat(n))).state={seconds:t.secondsFromProps(),timerId:0},t}return e=i,(n=[{key:"componentDidMount",value:function(){this.startTimer()}},{key:"componentWillUnmount",value:function(){this.stopTimer()}},{key:"secondsFromProps",value:function(){var t=this.props,e=t.seconds,n=t.expiresAt;return e||(n?Object(y.n)(n):0)}},{key:"startTimer",value:function(){var t=this;if(!this.state.timerId){var e=setInterval((function(){t.state.seconds<=0?(t.stopTimer(),t.props.onExpired()):t.setState((function(t){return{seconds:t.seconds-1}}))}),1e3);this.setState({timerId:e})}}},{key:"stopTimer",value:function(){clearInterval(this.state.timerId),this.setState({timerId:0})}},{key:"render",value:function(){return a.a.createElement("div",null,a.a.createElement(m.a,{style:{marginRight:"3px"},icon:b.b})," ",Object(y.p)(this.state.seconds))}}])&&D(e.prototype,n),r&&D(e,r),i}(o.Component),L=n(1186);n(1748);var C=n(1789);function M(){return(M=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t}).apply(this,arguments)}function N(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Y(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function F(t,e){return(F=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function B(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=q(t);if(e){var o=q(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return U(this,n)}}function U(t,e){return!e||"object"!==typeof e&&"function"!==typeof e?$(t):e}function $(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function q(t){return(q=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var z=function(t){!function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&F(t,e)}(i,t);var e,n,r,o=B(i);function i(){var t;N(this,i);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return(t=o.call.apply(o,[this].concat(n))).state={isShowError:!1,isAnyErrorItem:!1,formError:"",items:[],expiresAt:"",leftSeconds:0,isLoading:!1},t.onExpired=t.onExpired.bind($(t)),t}return e=i,(n=[{key:"UNSAFE_componentWillMount",value:function(){window.xprops&&window.xprops.onProps(this.onXChildData.bind(this))}},{key:"componentDidUpdate",value:function(){var t=this.props,e=t.onTrigger,n=t.setting,r=this.state,o=r.expiresAt,a=r.items;!+n.when_expired&&a.length&&f()().isAfter(o)&&e("removeItems",a.map((function(t){return t.external_id})))}},{key:"onNewItems",value:function(t){var e=t.items,n=t.checkout,r=void 0!==n&&n,o=t.expiresAt,a=void 0===o?"":o,i=t.leftSeconds,u=void 0===i?0:i,c=e.some((function(t){return"ok"!==t.status})),s=this.props,l=s.onTrigger,f=s.setting.position,d=!c&&"None"==f;if(r&&!c)l("checkout");else{l("enableCheckout",!c);var p=e.length&&!d?"show":"hide";this.setState({items:e,isAnyErrorItem:c,expiresAt:a,leftSeconds:u,isLoading:!1}),l(p)}}},{key:"onXChildData",value:function(t){var e,n=this;try{if(t&&(e=t.data),!e)return;if(this.props.isDemo)return void this.onNewItems({items:[{external_id:263129066,product_title:"Boat Rental",quantity:1,start:"2060-10-10T11:00:00.000Z",status:"ok"}],checkout:!1,expiresAt:f()().add(1,"minute"),leftSeconds:60});if(!e.items)return;var r=e,o=r.checkout,a=r.items,i=r.checkExpires,u=new Array(27).fill(void 0).map((function(t,e){return e+500})),c=this.props,s=c.reservationActions.submitReservation,l=c.onTrigger;e.checkExpires=i?this.state.expiresAt:null,s(e).then((function(t){var e=t.data.reservation,r=e.cart_token,a=e.expires_at,i=e.items,u=e.left_seconds,c=i.length?r:null;l("updateCartToken",c),n.onNewItems({items:i,checkout:o,expiresAt:a,leftSeconds:u})})).catch((function(t){var e=t.response;n.setState({formError:""}),e?401===e.status?n.onNewItems({items:[],checkout:o}):410===e.status?l("checkout"):u.includes(e.status)?console.log("%c[BTA: reservation widget] Failed to save reservation:\n                          ".concat(e.status," (").concat(e.statusText,")\n                          Please contact support@zetya.com for further assistance."),"color: red"):e.data&&(e.data.form?n.setState({formError:e.data.form}):n.onNewItems({items:Object(h.a)(a,e)})):setTimeout((function(){throw t}))}))}catch(d){setTimeout((function(){throw d}))}}},{key:"onExpired",value:function(){var t=this.props,e=t.onTrigger;+t.setting.when_expired?(e("enableCheckout",!1),this.setState({})):e("removeItems",this.state.items.map((function(t){return t.external_id})))}},{key:"onShowError",value:function(){var t=this.state.isShowError;this.setState({isShowError:!t})}},{key:"renderErrorItem",value:function(t){var e=this.state.isShowError,n=new L.a(this.props),r=this.props.style;return a.a.createElement("div",{style:window.screen.width>576?{padding:"0 15px",flexGrow:1}:{flexGrow:1}},a.a.createElement(j,{style:r,show:e,items:t,translation:n}),a.a.createElement("div",{className:"flexbox vertical-center space-between"},a.a.createElement("p",{style:this.textStyle({})},n.key("bookingNotReserved")),a.a.createElement("input",{type:"button",style:this.buttonStyle({margin:"0 1em"}),onClick:this.onShowError.bind(this),className:"pure-button fz14",value:n.key("updateReservation")})))}},{key:"buttonStyle",value:function(t){var e=this.props,n=e.style,r=e.defaultSetting.theme||{};return M({},t,n.body,{color:r.buttonTextColor,background:r.buttonColor})}},{key:"textStyle",value:function(t){var e=this.props,n=e.style,r=e.defaultSetting.theme||{};return M({},t,n.body,{color:r.textColor})}},{key:"layoutStyle",value:function(t){var e=this.props,n=e.style,r=e.defaultSetting.theme||{};return M({},t,n.body,{color:r.textColor,background:r.backgroundColor})}},{key:"onRetry",value:function(){var t=this.spinner;this.setState({isLoading:!0}),t&&t.show(),this.props.onTrigger("refresh")}},{key:"renderRetryButton",value:function(){var t=this;return a.a.createElement(a.a.Fragment,null,a.a.createElement(C.a,{ref:function(e){return t.spinner=e}}),a.a.createElement("input",{type:"button",style:{margin:"0 1em"},onClick:function(){return t.onRetry()},className:"expired pure-button fz14",value:"Retry",disabled:this.state.isLoading}))}},{key:"render",value:function(){var t=this.props,e=(t.style,t.setting),n=e.position,r=(e.mode,e.when_expired),o=(e.reservation_expiry_minutes,t.onTrigger),i=t.timeZone,u=(t.defaultSetting,this.state),c=(u.isShowError,u.formError),s=u.isAnyErrorItem,l=u.items,d=u.expiresAt,m=u.leftSeconds,v=this.textStyle({margin:"1em"}),h=this.layoutStyle({padding:"5px 15px",opacity:.98});!["Bottom","None"].includes(n)&&n||(h.transform="rotate(180deg)");var b=new L.a(this.props);return l.length>0?a.a.createElement("div",{className:"flexbox space-between vertical-center",style:h},s?this.renderErrorItem(l):a.a.createElement("div",{style:{flexGrow:1}},f()().isAfter(d)?o("enableCheckout",!1)&&a.a.createElement("div",{className:"flexbox space-between vertical-center"},a.a.createElement("p",{style:v},b.key("reservationExpired")),!p()(this.props.setting)&&!!+r&&this.renderRetryButton()):a.a.createElement("div",{className:"flexbox space-between vertical-center"},c?a.a.createElement("p",{style:v},b.key(c)):a.a.createElement(a.a.Fragment,null,a.a.createElement("p",{style:v},b.key("success")," ",Object(y.f)(d,i)),a.a.createElement("div",{style:M({},v,{flexBasis:"80px"})},a.a.createElement(R,{seconds:m,onExpired:this.onExpired}))))),a.a.createElement("input",{type:"button",style:this.buttonStyle({fontSize:"24px",padding:"0 8px 2px"}),className:"pure-button fz14",onClick:function(){return o("hide")},value:"\xd7"})):null}}])&&Y(e.prototype,n),r&&Y(e,r),i}(o.Component),G=n(1380),H=n(1231),V=n(1213),Z=n(1382),K=function(t){return function(){var e=Object(Z.a)(t.items),n=t.retry,r=t.checkExpires;return Object(V.b)(e,!0,n,r)}},Q={submitReservation:K};function W(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function X(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function J(t,e){return(J=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function tt(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=nt(t);if(e){var o=nt(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return et(this,n)}}function et(t,e){return!e||"object"!==typeof e&&"function"!==typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function nt(t){return(nt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function rt(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function ot(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?rt(Object(n),!0).forEach((function(e){at(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):rt(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function at(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var it=function(t,e){console.log("window.xprops.onTrigger not found",t,e)},ut=Object(i.b)((function(t){return ot(ot({},t.settings),{},{isDemo:window.bta.isDemo,timeZone:window.bta.timeZone,onTrigger:window.xprops?window.xprops.onTrigger:it})}),(function(t){return{reservationActions:Object(u.bindActionCreators)(ot({},r),t)}}))(z),ct=function(t){!function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&J(t,e)}(u,t);var e,n,r,o=tt(u);function u(){var t;W(this,u);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return(t=o.call.apply(o,[this].concat(n))).state={intervalId:null},t}return e=u,(n=[{key:"componentDidMount",value:function(){if(window.xprops)this.setup();else{var t=setInterval(this.setup.bind(this),200);this.setState({intervalId:t})}}},{key:"setup",value:function(){var t=window.xprops;if(t){var e=this.props,n=e.settings,r=e.defaultSetting,o=e.defaultTranslation,a=e.exceededTrialPlan,i=t.data&&t.data.style;i&&(n=s()(n,{style:i})),G.a.dispatch(H.setConfiguration(ot(ot({},n),{},{defaultSetting:r,defaultTranslation:o,exceededTrialPlan:a}))),t&&t.onInit&&t.onInit(n.setting),clearInterval(this.state.intervalId)}}},{key:"render",value:function(){return a.a.createElement("div",null,a.a.createElement(i.a,{store:G.a},a.a.createElement(ut,this.props)))}}])&&X(e.prototype,n),r&&X(e,r),u}(o.Component);window.changeStyle=function(t){return G.a.dispatch(H.setStyle(t))},window.changeTranslation=function(t,e){G.a.dispatch(H.setTranslation(t,e))},window.changeSetting=function(t,e){return G.a.dispatch(H.setSetting(t,e))}}}]);
//# sourceMappingURL=209-e558c54660177ce53134.chunk.js.map